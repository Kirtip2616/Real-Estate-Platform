"use strict";(self.webpackChunkhousing_demand=self.webpackChunkhousing_demand||[]).push([[95525],{10668:(e,t,s)=>{s.r(t)},93006:(e,t,s)=>{s.r(t)},73084:(e,t,s)=>{s.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var o=s(55328),n=s.n(o),i=s(8487),r=s(10724);const l=i.P`
  query {
    userDetails {
      id
      loggedIn
      name
      email
      phone
      profileType
      profileTypes
      isUser
      isOwner
      isBroker
      isSeller
      isBuilder
      isPrime
      designation
      experience
      isPasswordRandom
      shareShortlistUrl
      gplusConnected
      fbConnected
      url
      image
      emailVerified
      phoneVerified
      isHpPaidProfile
      isPaidProfile
      countryData {
        id
        name
        urlName
        countryCode
      }
      uuid
      hideProfilePicture
      whatsappSubscription
      profileUuid
      profile
      userStatus
    }
  }
`;function __WEBPACK_DEFAULT_EXPORT__(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(s,o,i)=>{let{fetch:a}=i;const{login:c,login:{loggedIn:d},cookies:{hasLoginAuth:p}}=o()||{};return d&&!e?Promise.resolve(c):p?a({query:{query:l},cacheType:"network-only",log:!1,withCredentials:!0,url:`${n().endPoints.gql}/auth`,apiName:"USER_DETAILS_API"}).catch((e=>e)).then((function(){let{data:{data:{userDetails:e}={}}={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?s((0,r.Z)({login:e||{},redirect:!1})):e})):(s({type:"SET_LOGIN_PARAM",payload:{attempted:!0}}),Promise.resolve({loggedIn:!1,err:"No Auth Token"}))}}},14358:(e,t,s)=>{s.d(t,{Z:()=>BulkLeadSelector});var o=s(42788),n=s(37900),i=s(36671);const checkboxStyle=(e,t)=>(0,o.css)("margin:auto;position:relative;top:8px;left:",e?"10px":"11px",";color:#8f8989;font-weight:bold;",t&&"visibility: hidden; opacity: 0;",""),checkboxContainerStyle=e=>(0,o.css)("width:36px;height:36px;background:rgba(0,0,0,0.1);border-radius:22px;position:absolute;right:6px;top:7px;",e&&"visibility: hidden",";"),r={name:"1n0qx70",styles:"position:absolute;right:6px;top:12px;"},l={name:"1gsom8l",styles:"background-color:inherit;font-size:18px;"};s(22419);s(10668);var a=s(24147),c=s(97512),d=s(54412),p=s(66777),u=s(66463);const g={CRF_DIALER_OPEN:(e,t)=>({category:"dialer_crf",action:"open",dimensions:(0,u.Z)(e,t)})},BulkLeadSelector=e=>{let{onChangeSelection:t=(()=>{}),source:s,selectedValues:u,propertyData:f,sellerContacts:h,style:x,isSelfMode:_=!1}=e;const{listingId:y,propertyType:m}=f||{},C=[{label:"",key:y}],[b]=(0,a.Z)(),{[m]:S=[]}=b,k=S.includes(y),v=(0,p.Z)(g),[D,j]=(0,n.useState)("");return(0,n.useEffect)((()=>{if(h&&h[y]){const{phone:{value:e}={}}=h[y];j(e)}}),[h]),(0,o.jsx)("div",{css:(0,o.css)([D?r:checkboxContainerStyle(k),x],"")},D?(0,o.jsx)(n.Fragment,null,_?(0,o.jsx)(i.Z,{type:"singleSelectCheckbox",items:C,displayType:"checkbox",style:checkboxStyle(u&&u.includes(y),!0)}):(0,o.jsx)(c.Z,{style:"_l81cud _c81fwx _g34jg8 _lzn01ojq _bof910p5 _1y0kdlk8 _1qsz1y44 _6hjph2mm _2stpyh40 _5j1y44 T_09002d7a",onClick:e=>((e,t)=>{e.preventDefault();const s=function getLastTen(e){try{return e.substr(-10)}catch(t){return e}}(t);window.open(`tel:+91${s}`,"_self"),(0,d.LS)("brokerCallTime",(new Date).getTime()),v("CRF_DIALER_OPEN")})(e,D)},D)):(0,o.jsx)(i.Z,{type:"singleSelectCheckbox",items:C,displayType:"checkbox",style:checkboxStyle(u&&u.includes(y)),checkboxStyle:l,selectedValues:u,onChange:e=>{let{item:o,event:n}=e;const{key:i}=o||{};n.preventDefault(),t(s,i)},isSecondary:!0,disabled:u&&5===u.length}))}},4631:(e,t,s)=>{s.d(t,{Z:()=>R});var o=s(37900),n=s(79181),i=s(66777),r=s(42788),l=s(92170);const a={name:"5wpf7q",styles:"width:100%;position:fixed;background:#fff;bottom:0;z-index:100;left:0;right:0;padding:10px 14px;box-shadow:0px -4px 20px 6px rgba(0,0,0,0.1);"},c={name:"1pgdocs",styles:"width:51px;height:54px;margin-right:15px;border-radius:4px;"},d={name:"16o16u9",styles:"display:flex;overflow:auto;padding-bottom:10px;border-bottom:1px solid #e2e2e2;margin-bottom:8px;"},selectionTextStyle=e=>(0,r.css)("font-size:14px;color:#5530d3;margin-top:10px;&:after{",(0,l.ZP)("arrowLeft"),";display:inline-block;font-size:10px;position:relative;left:5px;transform:",e?"rotate(90deg)":"rotate(-90deg)",";}"),p={name:"1jldjo6",styles:"font-size:14px;color:#999999;float:right;font-weight:400;"},u={name:"fxg4ox",styles:"background:#f2f3f8;border-radius:4px;padding:12px 11px;"},g={name:"1pjsxd",styles:"padding-bottom:8px;font-weight:500;"},f=(0,r.css)("position:absolute;top:0;right:8px;width:16px;height:16px;border-radius:8px;background:rgba(0,0,0,0.4);font-size:7px;color:#fff;font-weight:bold;&::after{",(0,l.ZP)("close"),";position:absolute;color:white;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;}"),h={name:"79elbk",styles:"position:relative;"},x={name:"38zrbw",styles:"padding:12px;"},_={name:"anhrke",styles:"background:#5530d3;opacity:0.87;border-radius:4px;padding:15px 12px;border:1px solid #5530d3;width:90% !important;"},y={name:"3x1taw",styles:"font-size:12px;line-height:14px;color:#ffffff;width:100%;margin-left:9px;&::before{content:'ðŸŽ‰';font-size:16px;position:absolute;left:12px;}"},m={name:"1123vha",styles:"font-size:12px;font-weight:400;"};s(22419);s(93006);var C=s(81327),b=s(29842),S=s(87412),k=s(87971),v=s(97512),D=s(44933),j=s(8770),T=s(36806),E=s(1782);const L=(0,n.Z)({props:function(){let{login:e,shell:{useragent:{isMobile:t,isFirefox:s}={}}={},filters:{service:o,category:n,selectedCity:i={}}={},cookies:r,seo:{pageTypeMajor:l}={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{login:e,isMobile:t,service:o,category:n,isFirefox:s,selectedCity:i,cookies:r,product:(0,E.Z)(o,n),pageTypeMajor:l}},actions:e=>({dispatch:e})})((e=>{let{dispatch:t,type:s=D.Z.DEFAULT,useFormData:n=(0,j.qW)({showPropertyConfig:!1}),propertyData:i,listingId:l,submitValue:a,leadCreated:c,isCtaClicked:d,crfData:p,notification_delay_in_mins:u=0,callBackOnOTPScreen:g=(()=>{})}=e;const f=i.find((e=>{let{listingId:t}=e;return t===l})),{sellers:h=[]}=f||{},{id:x}=h.reduce((function(e,t){return e.adDeficit>t.adDeficit?e:t}),0)||{};let _={data:f,isBulkLead:!0};p&&(_={..._,...p});const y={...e,..._},{submit:m,window:C}=(0,T.Z)(t,{type:s,useFormData:n,extendedProps:y,notification_delay_in_mins:u});return(0,o.useEffect)((()=>{d&&m().then((e=>{const{sellers:t,leadId:s}=e||{};let o={};t&&t.length>0&&(o=t.length>1&&t.find((e=>{let{id:t}=e;return t===x}))||t[0]),s&&c({[l]:o},l)}))}),[a]),(0,o.useEffect)((()=>{"otp"===C&&g()}),[C,a]),(0,r.jsx)("div",null)}));var P=s(24147),w=s(51378),A=s(54412),I=s(73084),Z=s(68866);const O={details_recommended_properties_contact:["Popular_Select","Popular_DeSelect","Popular_Crf"],others:["BuyersLike_Select","BuyersLike_DeSelect","BuyersLike_Crf"],compare_properties:["Compare_Select","Compare_DeSelect","Compare_Crf"],recently_added:["Recent_Select","Recent_DeSelect","Recent_Crf"],resale_properties:["Resale_Select","Resale_DeSelect","Resale_Crf"],project:["MoreProject_Select","MoreProject_DeSelect","MoreProject_Crf"]},U={BULK_LEAD_CTA_CLICKED:(e,t)=>{const{source:s}=t;return{category:"Group_CTA",action:O[s]?O[s][2]:"click"}},BULK_LEAD_CTA_SELECT:(e,t)=>{const{source:s}=t;return{category:"Group_CTA",action:O[s]?O[s][0]:"select"}},BULK_LEAD_CTA_DESELECT:(e,t)=>{const{source:s}=t;return{category:"Group_CTA",action:O[s]?O[s][1]:"deselect"}},LOGIN_MODAL:(e,t)=>{const{action:s,label:o,generic1:n,listingId:i}=t||{};return{category:"login",action:s,label:o,dimensions:{listingId:i,generic1:n}}}},R=(0,n.Z)({props:e=>{let{login:{loggedIn:t}={},shell:{useragent:{isMobile:s}={}}={}}=e;return{loggedIn:t,isMobile:s}},actions:{getUserDetails:I.default}})((e=>{let{children:t,propertyData:s=[],isSelfMode:n=!1,selectAll:l=!1,loggedIn:D,getUserDetails:j,isMobile:T,onCtaCallback:E,askOTPForCrfData:I=!1}=e;const[O,R]=(0,o.useState)([]),[B,F]=(0,o.useState)({}),[M,z]=(0,o.useState)(!1),q=(0,i.Z)(U),{setLoginData:K}=(0,S.useLoginContext)()||{},[V,N]=(0,o.useState)(!1),[$,G]=(0,o.useState)([]),[Y,W]=(0,o.useState)(!1),[H]=(0,P.Z)(),[X,J]=(0,o.useState)(0),[Q,ee]=(0,o.useState)(""),[te,se]=(0,o.useState)(null),[oe,ne]=(0,o.useState)(""),[ie,re]=(0,o.useState)(""),[le,ae]=(0,o.useState)(!1),[ce,de]=(0,o.useState)(!1),updateCrfData=()=>{j().then((e=>{const{phone:t,name:s,email:o,countryData:n}=e||{};se({name:s,phone:{value:t,countryData:n},email:o}),(0,A.LS)("crfData",{...(0,A.rV)("crfData"),name:s,phone:{value:t,countryData:n},email:o})}))},callBackOnOTPScreen=()=>{ce||de(!0)};(0,o.useEffect)((()=>{se((0,A.rV)("crfData")||{})}),[]),(0,o.useEffect)((()=>{if(te&&Y){const{phone:e}=te;e&&N(!V)}}),[te]),(0,o.useEffect)((()=>{ce&&I&&(D||K((e=>({...e,show:!0,modalType:k.K.USER_ACTION,showOTPScreenAfterAutoFilling:!0}))),de(!1))}),[ce,D]),(0,o.useEffect)((()=>{if(D&&ie){W(!0);const{phone:e}=te;e?N(!V):updateCrfData()}else D||re(!1)}),[D]),(0,o.useEffect)((()=>{oe&&Y&&q("BULK_LEAD_CTA_CLICKED",{source:oe})}),[oe,Y]),(0,o.useEffect)((()=>{if($.length){const e=O.filter((e=>!$.includes(e)));e.length||(ee(`Yay! You now have access to ${$.length} property contacts.`),W(!1),re(!1)),setTimeout((()=>{ee("")}),3e3),R(e)}}),[$]),(0,o.useEffect)((()=>{if(l&&!$.length){const e=s.filter((e=>{let{listingId:t,propertyType:s}=e;const{[s]:o=[]}=H;return!o.includes(t)})).map((e=>{let{listingId:t}=e;return t}));R(e),J(e.length),ne("compare_properties")}}),[H]);const[[pe]=[],[{isIntersecting:ue}={}]=[]]=(0,C.Z)({root:null,rootMargin:"0px",threshold:.7,keepAlive:!0}),removeSelection=e=>{if(O.indexOf(e)>-1){const t=O.filter((t=>t!==e));R(t)}},onCtaClick=(e,t)=>{if(t||e.stopPropagation(),D){W(!0);const{phone:e}=te||{};e?N(!V):updateCrfData()}else if(re(!0),T){let e=(0,A.rV)("crfData")||{};e.phone?(se(e),W(!0)):(re(!0),K((e=>({...e,show:!0,modalType:k.K.USER_ACTION}))))}else ae(!0)},loginModalForDesktop=()=>le&&(0,r.jsx)(Z.default,{redirect:!1,onClose:()=>{ae(!1)},portal:!0,onLoginSuccess:()=>{q("LOGIN_MODAL",{action:"otp_verify",label:"success"})}}),leadCreated=(e,t)=>{G((e=>[...e,t])),F((t=>({...t,...e})))},getCrf=()=>O&&O.length>0&&O.map(((e,t)=>(0,r.jsx)(o.Fragment,{key:e},(0,r.jsx)(L,{listingId:e,propertyData:s,submitValue:V,leadCreated,isCtaClicked:Y,crfData:te,placement:oe,notification_delay_in_mins:30*t,callBackOnOTPScreen}))));return(0,r.jsx)(o.Fragment,null,(0,r.jsx)("div",{ref:pe},t({onChangeSelection:(e,t)=>{if(O.includes(t)){const s=O.filter((e=>e!==t));ne(e),R(s),J(X-1),q("BULK_LEAD_CTA_DESELECT",{source:e})}else R([...O,t]),ne(e),J(X+1),q("BULK_LEAD_CTA_SELECT",{source:e})},selectedValues:O,removeSelection,sellerContacts:B}),n&&O.length>0&&(0,r.jsx)("div",{css:x},(0,r.jsx)(v.Z,{style:"_vy1osq _e28vuz _c8exct _5j1y44 T_abc9d216",onClick:e=>{E&&E({selectedValues:O}),onCtaClick(e)}},(0,r.jsx)("span",null,"Show Contacts")," ",(0,r.jsx)("span",{css:m}," ",`(${O.length} ${O.length>1?"Properties":"Property"})`)),loginModalForDesktop(),getCrf())),O.length>0&&!n&&ue&&(0,r.jsx)("div",{css:a},(0,r.jsx)("div",{css:u},M&&(0,r.jsx)("div",{css:d},s?s.filter((e=>{let{listingId:t}=e;return O.includes(t)})).map((e=>{let{listingId:t,title:s,coverImage:{src:o}={}}=e;return(0,r.jsx)("div",{key:t,css:h},(0,r.jsx)(b.Z,{src:o,style:c,alt:s}),(0,r.jsx)("div",{css:f,onClick:()=>{removeSelection(t)}}))})):null),(0,r.jsx)("div",{css:g},(0,r.jsx)("span",{css:selectionTextStyle(M),onClick:()=>z(!M)},O.length," ",O.length>1?"Properties":"Property"," Selected"," "),(0,r.jsx)("span",{css:p,onClick:function(){R([])}}," ","Unmark All"," "))),(0,r.jsx)(v.Z,{style:"_vy1osq _e28vuz _mkh2mm _tk14id _c8exct _5j1y44 T_1a66e596",onClick:e=>{E&&E({selectedValues:O}),onCtaClick(e)}},(0,r.jsx)("span",null,"Show Contacts")," ",(0,r.jsx)("span",{css:m}," ",`(${O.length} ${O.length>1?"Properties":"Property"})`)),loginModalForDesktop(),getCrf()),Q&&(0,r.jsx)(w.default,{text:`Yay! You now have access to ${X} property contacts.`,style:_,textStyleFromProps:y}))}))},68866:(e,t,s)=>{s.d(t,{default:()=>a});var o=s(19094),n=s(10724),i=s(79181),r=(s(37900),s(42788));function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e}).apply(this,arguments)}const l=(0,o.Z)((()=>Promise.all([s.e(63696),s.e(53883),s.e(4717),s.e(25773),s.e(46831),s.e(12847)]).then(s.bind(s,40879))),{silent:!1,ssr:!1,type:"local",container:"housing.demand",module:"common/components/Login/container"}),a=(0,i.Z)({actions:{loginSuccess:n.Z}})((e=>{let{loginSuccess:t,onClose:s,redirect:o=!0,generic1:n,...i}=e;return(0,r.jsx)(l,_extends({},i,{onClose:s,loginSuccess:e=>{let{login:i}=e;t({login:i,redirect:o,generic1:n,isFirstLogin:!0}),s&&s()}}))}))},25173:(e,t,s)=>{s.d(t,{Z:()=>SequentialFooterLoader});var o=s(42788);s(37900);const n={name:"urlo4y",styles:"text-align:center;height:85px;background-color:#e0e0e0;padding-top:16px;color:#999999;"},i=(0,o.css)("background:url(","//c.housingcdn.com/demand/s/client/common/assets/sequentialLoader.0799ded9.svg",") center / 100px no-repeat;margin-top:10px;height:40px;"),SequentialFooterLoader=e=>{let{style:t}=e;return(0,o.jsx)("div",{css:(0,o.css)([n,t],"")},"Hang on, loading content",(0,o.jsx)("div",{css:i}))}}}]);